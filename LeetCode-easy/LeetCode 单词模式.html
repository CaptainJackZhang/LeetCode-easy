<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.6 Beta 1 (457227)"/><meta name="author" content="zhangxianlei117@gmail.com"/><meta name="created" content="2018-09-17 04:16:34 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2018-09-17 04:53:06 +0000"/><title>LeetCode 单词模式</title></head><body><div><br/></div><div><br/></div><div>思想：建立两个字典双向映射</div><div><br/></div><div><br/></div><div>代码：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><div><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">class </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">Solution(</span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">object</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">):</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">def </span><span style="color: #ffc66d; font-family: Monaco; font-size: 12px;">wordPattern</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(</span><span style="color: #94558d; font-family: Monaco; font-size: 12px;">self</span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">, </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">pattern</span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">, </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">str):</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        </span><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">"""</span></div><div><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">        </span><span style="color: #629755; font-weight: bold; font-style: italic; font-family: Monaco; font-size: 12px;">:type</span><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;"> pattern: str</span></div><div><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">        </span><span style="color: #629755; font-weight: bold; font-style: italic; font-family: Monaco; font-size: 12px;">:type</span><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;"> str: str</span></div><div><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">        </span><span style="color: #629755; font-weight: bold; font-style: italic; font-family: Monaco; font-size: 12px;">:rtype</span><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">: bool</span></div><div><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">        """</span></div><div><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">        </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">dic1 = {}</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        dic2 = {}</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        i = </span><span style="color: #6897bb; font-family: Monaco; font-size: 12px;">0</span></div><div><span style="color: #6897bb; font-family: Monaco; font-size: 12px;">        </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">words = str.split()</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">if </span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">len</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(</span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">list</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(pattern)) != </span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">len</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(</span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">list</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(str.split())):</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">            </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">return </span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">False</span></div><div><br style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"/></div><div><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">        </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">for </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">alpha </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">in </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">pattern:</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">            </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">if </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">dic1.has_key(alpha):</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">                </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">if </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">dic1[alpha] != words[i]:</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">                    </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">return </span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">False</span></div><div><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">            </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">else</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">:</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">                dic1[alpha] = words[i]</span></div><div><br style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">            </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">if </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">dic2.has_key(words[i]):</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">                </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">if </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">dic2[words[i]] != alpha:</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">                    </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">return </span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">False</span></div><div><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">            </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">else</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">:</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">                dic2[words[i]] = alpha</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">            i += </span><span style="color: #6897bb; font-family: Monaco; font-size: 12px;">1</span></div><div><span style="color: #6897bb; font-family: Monaco; font-size: 12px;">        </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">return </span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">True</span></div></div></div><div><br/></div><div>效率：</div><div><img src="LeetCode%20%E5%8D%95%E8%AF%8D%E6%A8%A1%E5%BC%8F.resources/C0B524A5-14B9-4DC3-90AD-87D115406C3D.png" height="1346" width="1380"/></div><div>优化：使用set和zip函数，简化代码：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><div><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">class </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">Solution(</span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">object</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">):</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">def </span><span style="color: #ffc66d; font-family: Monaco; font-size: 12px;">wordPattern</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(</span><span style="color: #94558d; font-family: Monaco; font-size: 12px;">self</span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">, </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">pattern</span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">, </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">str):</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        </span><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">"""</span></div><div><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">        </span><span style="color: #629755; font-weight: bold; font-style: italic; font-family: Monaco; font-size: 12px;">:type</span><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;"> pattern: str</span></div><div><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">        </span><span style="color: #629755; font-weight: bold; font-style: italic; font-family: Monaco; font-size: 12px;">:type</span><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;"> str: str</span></div><div><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">        </span><span style="color: #629755; font-weight: bold; font-style: italic; font-family: Monaco; font-size: 12px;">:rtype</span><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">: bool</span></div><div><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">        """</span></div><div><span style="color: #629755; font-style: italic; font-family: Monaco; font-size: 12px;">        </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">strlist = str.split()</span></div><div><br style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">if </span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">len</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(pattern) != </span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">len</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(strlist):</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">            </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">return </span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">False</span></div><div><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">        </span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">return </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(</span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">len</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(</span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">set</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(pattern))) == (</span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">len</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(</span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">set</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(strlist))) == (</span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">len</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(</span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">set</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(</span><span style="color: #8888c6; font-family: Monaco; font-size: 12px;">zip</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">(pattern</span><span style="color: #cc7832; font-family: Monaco; font-size: 12px;">, </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">strlist))))</span></div><div><br style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"/></div></div></div><div><br/></div></body></html>